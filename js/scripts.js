/**
 * My Expenses v1.0.0
 * https://github.com/diegoteliz/my-expenses#readme
 * Copyright (c) 2016 - Diego Teliz <aloha@diegoteliz.com>
 * MIT License
 */
jQuery(document).ready(function(e){"use strict";function o(){C.is(".opened")&&t(),b.addClass("opened"),g.addClass("active"),w.addClass("active")}function n(){b.removeClass("opened"),g.removeClass("active"),w.removeClass("active")}function a(){b.is(".opened")?n():o()}function s(){b.is(".opened")&&n(),C.addClass("opened"),w.addClass("invisible")}function t(){C.removeClass("opened"),w.removeClass("invisible")}function l(){C.is(".opened")?t():s()}function i(){b.is(".opened")&&n(),C.is(".opened")&&t()}function c(o){console.log("2 - handleAuthResult"),o&&!o.error?r():(e(".loading").hide(),e("#authorize-div").fadeIn(200))}function d(o){return e(o).length>0}function r(){console.log("3 - startApp"),d(".dashboard")?(console.log("homepage-route"),gapi.client.load(I).then(u)):d(".envelopes")&&(console.log("homepage"),p())}function u(){console.log("loading-dashboard"),gapi.client.sheets.spreadsheets.values.get({spreadsheetId:M,range:E.dashboard}).then(function(e){var o=e.result.values;console.log(o),h(o)},function(e){console.log("Error: "+e.result.error.message)})}function h(o){if(o){var n=e("#available-value"),a=e("#savings-value"),s=e("#reward-value"),t=e("#current-value");e(".loading").hide(),n.html("$"+o[0][0]),a.html("$"+o[0][1]),s.html("$"+o[0][2]),t.html("$"+o[0][3]),e(".dashboard").fadeIn(200)}else console.log("Error loading data")}function p(){gapi.client.load(I).then(listMajors)}var v=e(window),g=(e("body"),e(".nav-btn")),f=e(".options-menu-btn"),m=e(".main-header"),b=e(".main-nav"),C=e(".options-menu"),w=e(".overlay"),k=(e(".nav-item"),e(".nav-link")),A=v.height(),y=v.width(),$=v.scrollTop(),j={phoneSmall:320,phoneMedium:480,phoneLarge:640,tablet:768,desktopSmall:1024};g.click(function(e){e.preventDefault(),a()}),k.click(function(o){o.preventDefault(),k.removeClass("active"),e(this).addClass("active")}),f.click(function(e){e.preventDefault(),l()}),w.click(function(e){i()}),v.keydown(function(e){switch(e.which){case 27:i()}}),v.on("scroll",function(e){if(y<=j.desktopSmall){var o=v.scrollTop();o>$?$>=50&&m.addClass("collapsed"):m.is(".collapsed")&&m.removeClass("collapsed"),$=o}}),v.on("resize",function(e){A=v.height(),y=v.width()});var z="https://sheets.googleapis.com",B="v4",D=z+"/"+B+"/",I=z+"/$discovery/rest?version="+B,M="15WHNmAqj7GIpFTocH2rMMY2bfqd18En6Lnee-AhGHkg",S="504102905851-nuidhoa6s03n8rs822sbgci4q4b72s7r.apps.googleusercontent.com",q=["https://www.googleapis.com/auth/spreadsheets.readonly"],E={dashboard:"Current!G4:J4",sample:"Sheet1!A1:A5",available:D+"spreadsheets/"+M+"/values/B1",savings:D+"spreadsheets/"+M+"/values/B2",reward:D+"spreadsheets/"+M+"/values/B3",current:D+"spreadsheets/"+M+"/values/B4"},G=e(".google-login-btn-new");G.click(function(e){console.log("# - handleAuthClick"),e.preventDefault(),gapi.auth.authorize({client_id:S,scope:q,immediate:!1},c)}),window.checkAuth=function(){console.log("1 - checkAuth"),gapi.auth.authorize({client_id:S,scope:q.join(" "),immediate:!0},c)}});